# Configuration Epic OAuth 2.0 / SMART on FHIR
# 
# ⚠️ INSTRUCTIONS :
# 1. Copiez ce fichier et renommez-le en .env
# 2. Remplissez avec VOS valeurs Epic (Client ID, etc.)
# 3. NE COMMITEZ JAMAIS le fichier .env !

# ============================================
# EPIC SANDBOX (Non-Production)
# ============================================

# Client ID fourni par Epic on FHIR (Non-Production)
# Format : xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
# ⚠️ À remplir avec VOTRE Client ID depuis Epic on FHIR
EPIC_CLIENT_ID_SANDBOX=

# URL de base Epic Sandbox (fixe, ne pas modifier)
EPIC_SANDBOX_BASE_URL=https://fhir.epic.com/interconnect-fhir-oauth

# Redirect URI pour OAuth (doit correspondre à celui configuré dans Epic)
# Pour Expo : app-soin-plaie://oauth/callback
EPIC_REDIRECT_URI_SANDBOX=app-soin-plaie://oauth/callback

# Scopes OAuth (doit correspondre EXACTEMENT à ceux configurés dans Epic)
# ⚠️ IMPORTANT : Votre application utilise SMART v2 dans Epic
# Format SMART v2 recommandé (mais Epic accepte aussi le format v1) :

# Format SMART v2 (avec .r pour read, .c pour create, .w pour write) :
# EPIC_SCOPES_SANDBOX=launch openid fhirUser offline_access patient/Patient.r patient/AllergyIntolerance.r patient/MedicationStatement.r patient/Condition.r patient/Observation.r patient/Observation.w

# Format SMART v1 (également accepté par Epic même avec SMART v2 configuré) :
EPIC_SCOPES_SANDBOX=launch openid fhirUser offline_access patient/Patient.read patient/AllergyIntolerance.read patient/MedicationStatement.read patient/Condition.read patient/Observation.read patient/Observation.write

# ⚠️ Les deux formats fonctionnent, mais utilisez celui qui correspond à vos scopes "Selected" dans Epic
# Le format SMART v1 (.read, .write) est plus couramment utilisé et fonctionne avec SMART v2

# ============================================
# EPIC PRODUCTION
# ============================================

# Client ID Production (laisser vide pour l'instant)
EPIC_CLIENT_ID_PRODUCTION=

# URL de base Epic Production (sera fournie par l'organisation)
EPIC_PRODUCTION_BASE_URL=

# Redirect URI Production
EPIC_REDIRECT_URI_PRODUCTION=app-soin-plaie://oauth/callback

# Scopes Production (généralement identiques)
EPIC_SCOPES_PRODUCTION=launch openid fhirUser patient/Patient.read patient/Observation.read patient/Observation.write patient/Condition.read patient/AllergyIntolerance.read patient/MedicationStatement.read offline_access

# ============================================
# CONFIGURATION GÉNÉRALE
# ============================================

# Mode : 'sandbox' en développement, 'production' en production
EPIC_MODE=sandbox

# Version FHIR : 'R4' (recommandé)
EPIC_FHIR_VERSION=R4

# Version SMART : 'v2' (si supporté) ou 'v1'
EPIC_SMART_VERSION=v2

# ============================================
# CONFIGURATION PKCE (Sécurité)
# ============================================

# Méthode PKCE : 'S256' (recommandé)
EPIC_PKCE_METHOD=S256

# Longueur du code verifier (128 recommandé)
EPIC_PKCE_VERIFIER_LENGTH=128

# ============================================
# INFORMATIONS APPLICATION
# ============================================

APP_NAME=App Soin Plaie
APP_VERSION=1.0.0

